{"remainingRequest":"D:\\GitHub\\Vectory\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GitHub\\Vectory\\src\\components\\ColorPicker.vue?vue&type=style&index=0&id=0684bb51&scoped=true&lang=css&","dependencies":[{"path":"D:\\GitHub\\Vectory\\src\\components\\ColorPicker.vue","mtime":1580250639859},{"path":"D:\\GitHub\\Vectory\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\GitHub\\Vectory\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\GitHub\\Vectory\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\GitHub\\Vectory\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GitHub\\Vectory\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.color-picker {\r\n  position: absolute;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  pointer-events: all;\r\n  z-index: 10;\r\n}\r\n.container {\r\n  top: 30vh; \r\n  left: 35vw;\r\n  position: absolute;\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  text-align: center;\r\n  width: 50vh;\r\n  height: 30vh;\r\n  background-color: rgb(100, 100, 100);\r\n  border-radius: 10px;\r\n  border: 4px solid rgb(106, 162, 247);\r\n  box-shadow: 0px 0px 40px 5px rgba(0, 0, 0, 0.473);\r\n  cursor: default !important;\r\n}\r\n#panel {\r\n  margin-left: 3%;\r\n  width: 55%;\r\n  height: 90%;\r\n  flex: 0 0 auto;\r\n  border: 2px solid white;\r\n}\r\n#slider {\r\n  margin-left: 1%;\r\n}\r\n.right {\r\n  width: 34%;\r\n  height: 90%;\r\n  margin-left: 2%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  justify-content: space-between;\r\n  border-left: 3px solid rgb(106, 162, 247);\r\n}\r\n.values {\r\n  font-family: Comfortaa;\r\n  color: white;\r\n}\r\n.rgb-holder {\r\n  display: flex; \r\n  justify-content: space-around; \r\n  margin-top: 3px;\r\n  margin-left: 10px;\r\n}\r\n.buttons {\r\n  margin-left: 2vw;\r\n  width: 110%;\r\n  height: 15%;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n}\r\n.button {\r\n  width: 40%;\r\n  height: 80%;\r\n  background-color: rgb(202, 202, 202);\r\n  font-family: Comfortaa;\r\n  font-size: 0.8em;\r\n  color: black;\r\n  text-align: center;\r\n  line-height: 25px;\r\n  border-radius: 2px;\r\n  margin-right: 2px;\r\n}\r\n.button:hover {\r\n  background-color: rgb(112, 153, 214);\r\n}\r\n.button:active {\r\n  background-color: rgb(145, 184, 243);\r\n}\r\n\r\n.picker-handle {\r\n  position: absolute;\r\n  width: 15px;\r\n  height: 15px;\r\n  border-radius: 10px;\r\n  border: 2px solid white;\r\n  z-index: 10;\r\n  pointer-events: none;\r\n}\r\n.slider-handle {\r\n  position: absolute;\r\n  width: 25px;\r\n  height: 4px;\r\n  border-radius: 5px;\r\n  background-color: white;\r\n  border: 1px solid rgb(24, 24, 24);\r\n  z-index: 10;\r\n  pointer-events: none;\r\n}\r\n",{"version":3,"sources":["ColorPicker.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ColorPicker.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div id=\"color-picker\" class=\"color-picker\" v-bind:style=\"{ display: show }\">\r\n\r\n    <div class=\"picker-handle\" v-bind:style=\"{ marginTop: ph_top + 'px', marginLeft: ph_left + 'px', backgroundColor: color }\"></div>\r\n    <div class=\"slider-handle\" v-bind:style=\"{ marginTop: sh_top + 'px', marginLeft: sh_left + 'px' }\"></div>\r\n\r\n    <div id=\"behindScreen\" style=\"width: 100%; height: 100%;\" @click=\"hide()\"></div>\r\n    <div id=\"container\" class=\"container\">\r\n        <div id=\"panel\">\r\n          <canvas id=\"picker\"></canvas>\r\n        </div>\r\n\r\n        <canvas id=\"slider\"></canvas>\r\n\r\n        <div class=\"bottom\">\r\n          <div class=\"buttons\">\r\n            <span class=\"button\" @click=\"setColor()\">ok</span>\r\n            <span class=\"button\" style=\"margin-left: 5px;\" @click=\"hide()\">cancel</span>\r\n          </div>\r\n        </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapMutations, mapGetters, mapState } from 'vuex'\r\nimport { bus } from '@/main.js'\r\n\r\nexport default {\r\n  name: 'ColorPicker',\r\n  data: function() {\r\n    return {\r\n      ph_top: 0,\r\n      ph_left: 0,\r\n\r\n      sh_top: 0,\r\n      sh_left: 0,\r\n\r\n      color: \"white\"\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations([\r\n      'HIDE_COLORPICKER'\r\n    ]),\r\n    hide: function() {\r\n      bus.$emit('hide_colorpicker')\r\n      this.HIDE_COLORPICKER();\r\n    },\r\n    setColor: function() {\r\n      bus.$emit('set_color');\r\n      this.hide();\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'clamp'\r\n    ]),\r\n    ...mapState([\r\n      'COLORPICKER_ACTIVE'\r\n    ]),\r\n    show: function() {\r\n      return this.COLORPICKER_ACTIVE ? '' : 'none'\r\n    }\r\n  },\r\n  mounted: function() {\r\n    var self = this;\r\n\r\n    this.ph_top = 3;\r\n    var picker = document.getElementById(\"picker\")\r\n    var slider = document.getElementById(\"slider\")\r\n\r\n    var ctx_slider = slider.getContext('2d')\r\n    var ctx_picker = picker.getContext('2d')\r\n\r\n    var grad_slider;\r\n    var grad_picker;\r\n\r\n    var picker_color = [255, 0, 0];\r\n\r\n    setPickerHeight();\r\n    setSliderHeight();\r\n  \r\n    drawSliderGrad();\r\n    drawPickerGrad(rgbToHex(...picker_color));\r\n\r\n    // The position of the picker's handle when adjusting the slider\r\n    var pickerOffPos = {\r\n      x: picker.width-1,\r\n      y: 0.1\r\n    }\r\n\r\n    var wd = document.getElementById('color-picker')\r\n\r\n\r\n    function setPickerHeight() {\r\n      // Manually reset canvas' size to prevent scaling\r\n      picker.width = window.innerHeight * 0.3*0.9 - 4;\r\n      picker.height = window.innerHeight * 0.3*0.87 - 4;\r\n    }\r\n\r\n    function setSliderHeight() {\r\n      // Manually reset canvas' size to prevent scaling\r\n      slider.width = window.innerHeight * 0.023;\r\n      slider.height = window.innerHeight * 0.3*0.87 - 4;\r\n    }\r\n\r\n    let setSliderHandle = () => {\r\n      // Set the slider handle's position when colorpicker is not displayed\r\n      var setNone = false;\r\n      if(wd.style.display == 'none') {\r\n        wd.style.display = '';\r\n        setNone = true;\r\n      }\r\n      \r\n      this.sh_left = slider.getBoundingClientRect().x - 4\r\n      this.sh_top = slider.getBoundingClientRect().y - 2.5\r\n\r\n      this.ph_left = picker.getBoundingClientRect().x - 5 + picker.width\r\n      this.ph_top = picker.getBoundingClientRect().y - 5\r\n\r\n      if(setNone)\r\n        wd.style.display = 'none';\r\n    };\r\n    \r\n    function drawSliderGrad() {\r\n      // Create slider gradient\r\n      grad_slider = ctx_slider.createLinearGradient(slider.width, slider.height, slider.width, 0);\r\n\r\n      // Create gradient\r\n      grad_slider.addColorStop(0.000, 'rgba(255, 0, 0, 1.000)');\r\n      grad_slider.addColorStop(0.150, 'rgba(255, 0, 255, 1.000)');\r\n      grad_slider.addColorStop(0.330, 'rgba(0, 0, 255, 1.000)');\r\n      grad_slider.addColorStop(0.490, 'rgba(0, 255, 255, 1.000)');\r\n      grad_slider.addColorStop(0.670, 'rgba(0, 255, 0, 1.000)');\r\n      grad_slider.addColorStop(0.840, 'rgba(255, 255, 0, 1.000)');\r\n      grad_slider.addColorStop(1.000, 'rgba(255, 0, 0, 1.000)');\r\n      \r\n      ctx_slider.fillStyle = grad_slider;\r\n      ctx_slider.fillRect(0, 0, slider.width, slider.height);\r\n    }\r\n\r\n    function drawPickerGrad(color) {\r\n      // Create picker white-color gradient\r\n      grad_picker = ctx_picker.createLinearGradient(0, 0, ctx_picker.canvas.width, 0);\r\n      grad_picker.addColorStop(0, 'white');\r\n      grad_picker.addColorStop(1,  color);\r\n\r\n      ctx_picker.fillStyle = grad_picker;\r\n      ctx_picker.fillRect(0, 0, ctx_picker.canvas.width, ctx_picker.canvas.height);\r\n\r\n      // Create picker black-transparent gradient\r\n      grad_picker = ctx_picker.createLinearGradient(0, 0, 0, ctx_picker.canvas.height);\r\n      grad_picker.addColorStop(0, 'rgba(0,0,0,0)');\r\n      grad_picker.addColorStop(1,  '#000');\r\n\r\n      ctx_picker.fillStyle = grad_picker;\r\n      ctx_picker.fillRect(0, 0, ctx_picker.canvas.width, ctx_picker.canvas.height);\r\n    }\r\n\r\n    function getMousePos(canvas, evt) {\r\n      var _rect = canvas.getBoundingClientRect();\r\n      return {\r\n          x: (evt.clientX - _rect.x),\r\n          y: (evt.clientY - _rect.y)\r\n      };\r\n    }\r\n\r\n    function componentToHex(c) {\r\n      var hex = c.toString(16);\r\n      return hex.length == 1 ? \"0\" + hex : hex;\r\n    }\r\n\r\n    function rgbToHex(r, g, b) {\r\n      return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n    }\r\n\r\n    function handleSliderChange(e) {\r\n      var x = getMousePos(slider, e).x\r\n      var y = getMousePos(slider, e).y\r\n\r\n      x = 0;\r\n      y = self.clamp(y, 0, slider.height-1)\r\n\r\n      var data = ctx_slider.getImageData(x, y, 1, 1).data;\r\n      picker_color = [data[0], data[1], data[2]];\r\n      drawPickerGrad(rgbToHex(...picker_color))\r\n\r\n      handlePickerChange(null, pickerOffPos.x, pickerOffPos.y)\r\n    }\r\n\r\n    let handlePickerChange = (e, _x, _y) => {\r\n      var x;\r\n      var y;\r\n\r\n      if(!_x || !_y) {\r\n        x = getMousePos(picker, e).x;\r\n        y = getMousePos(picker, e).y;\r\n\r\n        x = self.clamp(x, 0.1, picker.width-1)\r\n        y = self.clamp(y, 0.1, picker.height-1)\r\n\r\n        pickerOffPos.x = x\r\n        pickerOffPos.y = y\r\n      }\r\n      else {\r\n        x = _x;\r\n        y = _y;\r\n      }\r\n\r\n      var data = ctx_picker.getImageData(x, y, 1, 1).data;\r\n      var color = {\r\n        rgb: data,\r\n        hex: rgbToHex(data[0], data[1], data[2])\r\n      }\r\n\r\n      this.color = color.hex;\r\n      bus.$emit('color_change', color);\r\n    }\r\n\r\n\r\n    setSliderHandle()\r\n\r\n\r\n    var pickerDown = false\r\n    picker.addEventListener('mousedown', (e) => {\r\n      // Change the handle's position\r\n      this.ph_top = e.clientY-5\r\n      this.ph_left = e.clientX-5\r\n\r\n      handlePickerChange(e)\r\n      pickerDown = true\r\n    });\r\n\r\n    var sliderDown = false\r\n    slider.addEventListener('mousedown', (e) => {\r\n      sliderDown = true\r\n      handleSliderChange(e)\r\n\r\n      var _rect = slider.getBoundingClientRect();\r\n\r\n      // Change the handle's position\r\n      this.sh_top = this.clamp(e.clientY-1.5, _rect.y-1.5, _rect.y + slider.height-1.5)\r\n    });\r\n\r\n    window.addEventListener('mousemove', (e) => {\r\n      if(pickerDown) {\r\n        var _rect = picker.getBoundingClientRect();\r\n\r\n        // Change the picker handle's position\r\n        this.ph_top = this.clamp(e.clientY-5, _rect.y-5, _rect.y + picker.height-5)\r\n        this.ph_left = this.clamp(e.clientX-5, _rect.x-5, _rect.x + picker.width-5)\r\n\r\n        handlePickerChange(e);\r\n      }\r\n      if(sliderDown) {\r\n        var _rect = slider.getBoundingClientRect();\r\n\r\n        // Change the handle's position\r\n        this.sh_top = this.clamp(e.clientY-1.5, _rect.y-1.5, _rect.y + slider.height-1.5)\r\n\r\n        handleSliderChange(e);\r\n      }\r\n    });\r\n\r\n    window.addEventListener('resize', function() {\r\n      setPickerHeight();\r\n      setSliderHeight();\r\n\r\n      drawPickerGrad(rgbToHex(...picker_color))\r\n      drawSliderGrad();\r\n\r\n      setSliderHandle()\r\n    })\r\n\r\n    window.addEventListener('mouseup', function() {\r\n      sliderDown = false\r\n      pickerDown = false\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.color-picker {\r\n  position: absolute;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  pointer-events: all;\r\n  z-index: 10;\r\n}\r\n.container {\r\n  top: 30vh; \r\n  left: 35vw;\r\n  position: absolute;\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  text-align: center;\r\n  width: 50vh;\r\n  height: 30vh;\r\n  background-color: rgb(100, 100, 100);\r\n  border-radius: 10px;\r\n  border: 4px solid rgb(106, 162, 247);\r\n  box-shadow: 0px 0px 40px 5px rgba(0, 0, 0, 0.473);\r\n  cursor: default !important;\r\n}\r\n#panel {\r\n  margin-left: 3%;\r\n  width: 55%;\r\n  height: 90%;\r\n  flex: 0 0 auto;\r\n  border: 2px solid white;\r\n}\r\n#slider {\r\n  margin-left: 1%;\r\n}\r\n.right {\r\n  width: 34%;\r\n  height: 90%;\r\n  margin-left: 2%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  justify-content: space-between;\r\n  border-left: 3px solid rgb(106, 162, 247);\r\n}\r\n.values {\r\n  font-family: Comfortaa;\r\n  color: white;\r\n}\r\n.rgb-holder {\r\n  display: flex; \r\n  justify-content: space-around; \r\n  margin-top: 3px;\r\n  margin-left: 10px;\r\n}\r\n.buttons {\r\n  margin-left: 2vw;\r\n  width: 110%;\r\n  height: 15%;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n}\r\n.button {\r\n  width: 40%;\r\n  height: 80%;\r\n  background-color: rgb(202, 202, 202);\r\n  font-family: Comfortaa;\r\n  font-size: 0.8em;\r\n  color: black;\r\n  text-align: center;\r\n  line-height: 25px;\r\n  border-radius: 2px;\r\n  margin-right: 2px;\r\n}\r\n.button:hover {\r\n  background-color: rgb(112, 153, 214);\r\n}\r\n.button:active {\r\n  background-color: rgb(145, 184, 243);\r\n}\r\n\r\n.picker-handle {\r\n  position: absolute;\r\n  width: 15px;\r\n  height: 15px;\r\n  border-radius: 10px;\r\n  border: 2px solid white;\r\n  z-index: 10;\r\n  pointer-events: none;\r\n}\r\n.slider-handle {\r\n  position: absolute;\r\n  width: 25px;\r\n  height: 4px;\r\n  border-radius: 5px;\r\n  background-color: white;\r\n  border: 1px solid rgb(24, 24, 24);\r\n  z-index: 10;\r\n  pointer-events: none;\r\n}\r\n</style>\r\n"]}]}