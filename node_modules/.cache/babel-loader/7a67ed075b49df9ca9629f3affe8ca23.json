{"remainingRequest":"D:\\GitHub\\Vectory\\node_modules\\babel-loader\\lib\\index.js!D:\\GitHub\\Vectory\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\GitHub\\Vectory\\src\\store.js","dependencies":[{"path":"D:\\GitHub\\Vectory\\src\\store.js","mtime":1555152641900},{"path":"D:\\GitHub\\Vectory\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GitHub\\Vectory\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GitHub\\Vectory\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find-index\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    ACTIVE: '',\n    TOOLSELECT: null,\n    TOOLPOINTER: null,\n    TOOLPEN: null,\n    TOOLCIRCLE: null,\n    OBJECTS: [],\n    SELECTED: [],\n    ACTIONS: []\n  },\n  mutations: {\n    // --- Tools ---\n    SET_ACTIVE: function SET_ACTIVE(state, type) {\n      state.ACTIVE = type;\n    },\n    SET_TOOLSELECT: function SET_TOOLSELECT(state, tool) {\n      state.TOOLSELECT = tool;\n    },\n    SET_TOOLPOINTER: function SET_TOOLPOINTER(state, tool) {\n      state.TOOLPOINTER = tool;\n    },\n    SET_TOOLPEN: function SET_TOOLPEN(state, tool) {\n      state.TOOLPEN = tool;\n    },\n    SET_TOOLCIRCLE: function SET_TOOLCIRCLE(state, tool) {\n      state.TOOLCIRCLE = tool;\n    },\n    // --- Shapes ---\n    ADD_SHAPE: function ADD_SHAPE(state, shape) {\n      state.OBJECTS.push(shape);\n    },\n    // --- Selection ---\n    ADD_SELECT: function ADD_SELECT(state, shape) {\n      state.SELECTED.push(shape);\n    },\n    CLEAR_SELECT: function CLEAR_SELECT(state) {\n      state.SELECTED = [];\n    },\n    DELETE_SELECT: function DELETE_SELECT(state) {\n      // Count from end to begin to allow pop()\n      for (var i = state.SELECTED.length - 1; i >= 0; i--) {\n        // Destroy the shape (it's still in the objects and the selection array)\n        state.SELECTED[i].remove(); // Find the shape in the objects array\n\n        var index = state.OBJECTS.findIndex(function (x) {\n          return x === state.SELECTED[i];\n        }); // Remove it\n\n        state.OBJECTS.splice(index, 1); // Remove the shape from the selection array\n\n        state.SELECTED.pop();\n      }\n    },\n    // Add an action to the undo list\n    ADD_ACTION: function ADD_ACTION(state, action) {\n      state.ACTIONS.push(action);\n    },\n    UNDO: function UNDO(state) {\n      var action = state.ACTIONS.pop();\n\n      switch (action.type) {\n        case 'move':\n          var delta = action.data.startPos.subtract(action.data.endPos);\n\n          for (var i = 0; i < action.data.paths.length; i++) {\n            action.data.paths[i].translate(delta);\n          }\n\n          state.SELECTED = action.data.paths;\n          break;\n\n        case 'scale':\n          var pivot = action.data.pivot;\n          var init = action.data.handle_init;\n          var end = action.data.handle_end;\n          var relH = 1;\n          var relW = 1;\n\n          if (!action.data.lockX) {\n            var relH = init.subtract(pivot).y / end.subtract(pivot).y;\n          }\n\n          var relW = init.subtract(pivot).x / end.subtract(pivot).x;\n          console.log(init.subtract(pivot).x);\n          console.log(end.subtract(pivot).x);\n\n          for (var i = 0; i < action.data.paths.length; i++) {\n            action.data.paths[i].scale(relW, relH, pivot);\n          }\n\n          state.SELECTED = action.data.paths;\n          break;\n      }\n    }\n  },\n  getters: {\n    clamp: function clamp(state) {\n      return function (value, min, max) {\n        if (value < min) {\n          return min;\n        } else if (value > max) {\n          return max;\n        }\n\n        return value;\n      };\n    }\n  }\n});",{"version":3,"sources":["D:\\GitHub\\Vectory\\src\\store.js"],"names":["Vue","Vuex","use","Store","state","ACTIVE","TOOLSELECT","TOOLPOINTER","TOOLPEN","TOOLCIRCLE","OBJECTS","SELECTED","ACTIONS","mutations","SET_ACTIVE","type","SET_TOOLSELECT","tool","SET_TOOLPOINTER","SET_TOOLPEN","SET_TOOLCIRCLE","ADD_SHAPE","shape","push","ADD_SELECT","CLEAR_SELECT","DELETE_SELECT","i","length","remove","index","findIndex","x","splice","pop","ADD_ACTION","action","UNDO","delta","data","startPos","subtract","endPos","paths","translate","pivot","init","handle_init","end","handle_end","relH","relW","lockX","y","console","log","scale","getters","clamp","value","min","max"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n  state: {\r\n    ACTIVE: '',\r\n\r\n    TOOLSELECT: null,\r\n    TOOLPOINTER: null,\r\n    TOOLPEN: null,\r\n    TOOLCIRCLE: null,\r\n\r\n    OBJECTS: [],\r\n    SELECTED: [],\r\n\r\n    ACTIONS: []\r\n  },\r\n  mutations: {\r\n    // --- Tools ---\r\n    SET_ACTIVE: function(state, type) {\r\n      state.ACTIVE = type;\r\n    },\r\n\r\n    SET_TOOLSELECT: (state, tool) => {\r\n      state.TOOLSELECT = tool;\r\n    },\r\n    SET_TOOLPOINTER: (state, tool) => {\r\n      state.TOOLPOINTER = tool;\r\n    },\r\n    SET_TOOLPEN: (state, tool) => {\r\n      state.TOOLPEN = tool;\r\n    },\r\n    SET_TOOLCIRCLE: (state, tool) => {\r\n      state.TOOLCIRCLE = tool;\r\n    },\r\n\r\n    // --- Shapes ---\r\n    ADD_SHAPE: (state, shape) => {\r\n      state.OBJECTS.push(shape);\r\n    },\r\n\r\n    // --- Selection ---\r\n    ADD_SELECT: (state, shape) => {\r\n      state.SELECTED.push(shape);\r\n    },\r\n    CLEAR_SELECT: (state) => {\r\n      state.SELECTED = [];\r\n    },\r\n    DELETE_SELECT: (state) => {\r\n      // Count from end to begin to allow pop()\r\n      for(var i=state.SELECTED.length-1; i>=0; i--) {\r\n        // Destroy the shape (it's still in the objects and the selection array)\r\n        state.SELECTED[i].remove();\r\n\r\n        // Find the shape in the objects array\r\n        var index = state.OBJECTS.findIndex(x => x === state.SELECTED[i]);\r\n        // Remove it\r\n        state.OBJECTS.splice(index, 1);\r\n\r\n        // Remove the shape from the selection array\r\n        state.SELECTED.pop();\r\n\r\n      }\r\n    },\r\n\r\n    // Add an action to the undo list\r\n    ADD_ACTION(state, action) {\r\n      state.ACTIONS.push(action);\r\n    },\r\n    UNDO(state) {\r\n      var action = state.ACTIONS.pop();\r\n      \r\n      switch(action.type) {\r\n        case 'move':\r\n          var delta = action.data.startPos.subtract(action.data.endPos);\r\n\r\n          for(var i=0; i<action.data.paths.length; i++) {\r\n            action.data.paths[i].translate(delta);\r\n          }\r\n\r\n          state.SELECTED = action.data.paths;\r\n          break;\r\n\r\n        case 'scale':\r\n          var pivot = action.data.pivot;\r\n          var init = action.data.handle_init;\r\n          var end = action.data.handle_end;\r\n\r\n          var relH = 1;\r\n          var relW = 1;\r\n\r\n          if(!action.data.lockX){\r\n            var relH = init.subtract(pivot).y / end.subtract(pivot).y;\r\n          }\r\n          var relW = init.subtract(pivot).x / end.subtract(pivot).x;\r\n          console.log(init.subtract(pivot).x);\r\n          console.log(end.subtract(pivot).x);\r\n\r\n          for(var i=0; i<action.data.paths.length; i++) {\r\n            action.data.paths[i].scale(relW, relH, pivot);\r\n          }\r\n\r\n          state.SELECTED = action.data.paths;\r\n          break;\r\n      }\r\n    }\r\n  },\r\n  getters: {\r\n    clamp: (state) => (value, min, max) => {\r\n      if(value < min){\r\n        return min;\r\n      }else if(value > max){\r\n          return max;\r\n      }\r\n      return value;\r\n    }\r\n  }\r\n})\r\n"]}]}